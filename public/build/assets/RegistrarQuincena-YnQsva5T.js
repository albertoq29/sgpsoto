import{W as N,r as x,j as e,Y as _}from"./app-RqH-pmAi.js";import{A as D}from"./AuthenticatedLayout-4ajSe-j3.js";import{S as h}from"./sweetalert2.esm.all-D3pEHXw3.js";const f=Symbol.for("constructDateFrom");function b(n,a){return typeof n=="function"?n(a):n&&typeof n=="object"&&f in n?n[f](a):n instanceof Date?new n.constructor(a):new Date(a)}function F(n,a){return b(n,n)}function p(n,a){const s=F(n),i=s.getFullYear(),l=s.getMonth(),o=b(s,0);return o.setFullYear(i,l+1,0),o.setHours(0,0,0,0),o.getDate()}function E({auth:n,empleados:a}){const{data:s,setData:i,post:l,errors:o}=N({empleado_id:"",tipo_quincena:"primer",fecha_pago:""}),[c,j]=x.useState(""),[m,g]=x.useState(""),v=t=>{if(i(r=>({...r,tipo_quincena:t})),c){const r=new Date().getFullYear(),d=t==="primer"?15:p(new Date(r,c-1));i(u=>({...u,fecha_pago:`${r}-${String(c).padStart(2,"0")}-${String(d).padStart(2,"0")}`}))}},y=t=>{const r=t.target.value;j(r),r&&w(s.tipo_quincena,r)},w=(t,r)=>{const d=new Date().getFullYear(),u=t==="primer"?15:p(new Date(d,r-1));i("fecha_pago",`${d}-${String(r).padStart(2,"0")}-${String(u).padStart(2,"0")}`)},S=t=>{if(t.preventDefault(),!s.empleado_id||!c||!s.fecha_pago){g("Por favor complete todos los campos.");return}g(""),l(route("quincena.registrar"),{onSuccess:()=>{h.fire({icon:"success",title:"Quincena Registrada",text:"La quincena ha sido registrada con éxito.",confirmButtonText:"Aceptar"})},onError:()=>{h.fire({icon:"error",title:"Error",text:"Ocurrió un error al registrar la quincena.",confirmButtonText:"Aceptar"})}})};return e.jsxs(D,{user:n.user,children:[e.jsx(_,{title:"Registrar Quincena"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Registrar Quincena"}),m&&e.jsx("div",{className:"mb-4 p-4 rounded-md bg-red-50 text-red-600",children:m}),o&&Object.keys(o).length>0&&e.jsx("div",{className:"mb-4 p-4 rounded-md bg-red-50",children:Object.values(o).map((t,r)=>e.jsx("div",{className:"text-sm text-red-600",children:t},r))}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empleado"}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:s.empleado_id,onChange:t=>i("empleado_id",t.target.value),children:[e.jsx("option",{value:"",children:"Seleccione un empleado"}),a.map(t=>e.jsxs("option",{value:t.id,children:[t.nombre," ",t.apellido," - ",t.cedula]},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Quincena"}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:s.tipo_quincena,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"primer",children:"Primera Quincena"}),e.jsx("option",{value:"segunda",children:"Segunda Quincena"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mes de Pago"}),e.jsxs("select",{className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:c,onChange:y,children:[e.jsx("option",{value:"",children:"Seleccione un mes"}),[...Array(12)].map((t,r)=>e.jsx("option",{value:r+1,children:new Date(0,r).toLocaleString("es-ES",{month:"long"})},r+1))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Pago"}),e.jsx("input",{type:"text",readOnly:!0,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm bg-gray-100",value:s.fecha_pago})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Registrar Quincena"})})]})]})})})})]})}export{E as default};
